(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[648],{4642:(e,t,a)=>{Promise.resolve().then(a.bind(a,6473))},6473:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>f});var o,r,n,s,l=a(5155),i=a(2115);"function"==typeof SuppressedError&&SuppressedError;async function c(e,t={},a){return window.__TAURI_INTERNALS__.invoke(e,t,a)}async function d(e,t){await c("plugin:event|unlisten",{event:e,eventId:t})}async function u(e,t,a){var o;return c("plugin:event|listen",{event:e,target:"string"==typeof(null==a?void 0:a.target)?{kind:"AnyLabel",label:a.target}:null!==(o=null==a?void 0:a.target)&&void 0!==o?o:{kind:"Any"},handler:function(e,t=!1){return window.__TAURI_INTERNALS__.transformCallback(e,t)}(t)}).then(t=>async()=>d(e,t))}new WeakMap,new WeakMap,new WeakMap,new WeakMap,function(e){e.WINDOW_RESIZED="tauri://resize",e.WINDOW_MOVED="tauri://move",e.WINDOW_CLOSE_REQUESTED="tauri://close-requested",e.WINDOW_DESTROYED="tauri://destroyed",e.WINDOW_FOCUS="tauri://focus",e.WINDOW_BLUR="tauri://blur",e.WINDOW_SCALE_FACTOR_CHANGED="tauri://scale-change",e.WINDOW_THEME_CHANGED="tauri://theme-changed",e.WINDOW_CREATED="tauri://window-created",e.WEBVIEW_CREATED="tauri://webview-created",e.DRAG_ENTER="tauri://drag-enter",e.DRAG_OVER="tauri://drag-over",e.DRAG_DROP="tauri://drag-drop",e.DRAG_LEAVE="tauri://drag-leave"}(s||(s={}));var p=a(8537),m=a(8698);function b(){let[e,t]=(0,i.useState)({bota:!1,peito:!1,pocao:!1,ultimate:!1}),[a,o]=(0,i.useState)({}),[r,n]=(0,i.useState)([]),[s,c]=(0,i.useState)({bota:60,peito:60,pocao:60,ultimate:60}),d=localStorage.getItem("partyId"),b=(e,t,a)=>{if(!d){console.error("Party ID n\xe3o encontrado");return}let o=(0,m.KR)(p.db,"parties/".concat(d,"/users/").concat(e,"/cooldown"));(0,m.yo)(o,{[t]:a}).then(()=>console.log("".concat(e," cooldown de ").concat(t," atualizado com sucesso"))).catch(e=>console.error("Erro ao atualizar cooldown:",e))},f=(e,a)=>{let o=1e3*s[e];t(t=>({...t,[e]:!0})),b(a,e,!0),setTimeout(()=>{t(t=>({...t,[e]:!1})),b(a,e,!1)},o)};(0,i.useEffect)(()=>{if(!d){console.error("Party ID n\xe3o encontrado");return}let e=(0,m.KR)(p.db,"parties/".concat(d,"/users"));(0,m.Zy)(e,e=>{let t=e.val();if(t){o(t);let e=localStorage.getItem("orderedUsers"),a=e?JSON.parse(e):[],r=[...a.filter(e=>t[e]),...Object.keys(t).filter(e=>!a.includes(e))];n(r),localStorage.setItem("orderedUsers",JSON.stringify(r))}})},[d]),(0,i.useEffect)(()=>{{let e=localStorage.getItem("ultimateCooldown"),t=localStorage.getItem("peitoCooldown"),a=localStorage.getItem("botaCooldown"),o=localStorage.getItem("pocaoCooldown");e&&c(t=>({...t,ultimate:parseInt(e)})),t&&c(e=>({...e,peito:parseInt(t)})),a&&c(e=>({...e,bota:parseInt(a)})),o&&c(e=>({...e,pocao:parseInt(o)}))}},[]),(0,i.useEffect)(()=>{let e=e=>{let t=localStorage.getItem("nickname");if(t)switch(e.event){case"bota":f("bota",t);break;case"peito":f("peito",t);break;case"pocao":f("pocao",t);break;case"ultimate":f("ultimate",t)}};return u("bota",e),u("peito",e),u("pocao",e),u("ultimate",e),()=>{u("bota",e).then(e=>e()),u("peito",e).then(e=>e()),u("pocao",e).then(e=>e()),u("ultimate",e).then(e=>e())}},[d,s]);let g=(e,t)=>{let a=[...r];if("up"===t&&e>0){let[t]=a.splice(e,1);a.splice(e-1,0,t)}else if("down"===t&&e<a.length-1){let[t]=a.splice(e,1);a.splice(e+1,0,t)}n(a),localStorage.setItem("orderedUsers",JSON.stringify(a))};return(0,l.jsxs)("div",{className:"flex flex-col items-center p-4",children:[(0,l.jsx)("h2",{className:"text-center text-2xl mb-4",children:"Sistema de Cooldown"}),(0,l.jsxs)("div",{className:"mt-6 w-full",children:[(0,l.jsx)("h3",{className:"text-xl mb-2",children:"Usu\xe1rios:"}),(0,l.jsx)("div",{children:r.map((t,o)=>{var r;let n=(null===(r=a[t])||void 0===r?void 0:r.cooldown)||{};return(0,l.jsxs)("div",{className:"flex items-center mb-2 p-2 bg-gray-800 text-white rounded",children:[(0,l.jsxs)("span",{className:"flex-1",children:[t,":"," ",Object.keys(e).map(e=>{let t=n[e];return(0,l.jsxs)("span",{className:"mr-2 ".concat(t?"text-red-500":"text-green-500"),children:[e.charAt(0).toUpperCase()+e.slice(1)," ",t?"Ativo":"Inativo"]},e)})]}),(0,l.jsx)("button",{onClick:()=>g(o,"up"),className:"ml-2 text-blue-500 hover:text-blue-700",children:"↑"}),(0,l.jsx)("button",{onClick:()=>g(o,"down"),className:"ml-2 text-blue-500 hover:text-blue-700",children:"↓"})]},t)})})]})]})}function f(){return(0,l.jsx)("div",{className:"grid grid-rows-[auto_1fr_auto] items-center justify-items-center h-screen p-8 pb-20 gap-16 sm:p-20 font-[family-name:var(--font-geist-sans)] overflow-hidden",children:(0,l.jsx)("main",{className:"flex flex-col gap-8 items-center sm:items-start",children:(0,l.jsx)("div",{children:(0,l.jsx)(b,{})})})})}},8537:(e,t,a)=>{"use strict";a.d(t,{db:()=>l});var o=a(9904),r=a(6553),n=a(8698);let s=(0,o.Wp)({apiKey:"AIzaSyCdJM_Eimwhgy1BNd5SDFTseQhbH4tIS7Q",authDomain:"albioncd-e2f3b.firebaseapp.com",projectId:"albioncd-e2f3b",storageBucket:"albioncd-e2f3b.firebasestorage.app",messagingSenderId:"1068825253839",appId:"1:1068825253839:web:cd9eb51155be7e86b2e4ba",measurementId:"G-RLL7P1ESP2"});(0,r.TT)()&&(0,r.P5)(s);let l=(0,n.C3)(s)}},e=>{var t=t=>e(e.s=t);e.O(0,[507,353,441,517,358],()=>t(4642)),_N_E=e.O()}]);